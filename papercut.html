<!doctype html>
<html lang="zh">

<head>
  <meta charset="utf-8" />
  <title>HTML5 video caption/subtitle demo</title>
</head>

<body>

  <div id="app">
    <audio controls id="auioelem" style="width:500px">
      <source src="papercut.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>
    <br><br>


    <button id="ffbutton" @click="next">Run</button>

    <p id="napisy"></p>

    <input type="text" v-model="mytext" style="width:500px">





    <br>
    <br>
    <br>
    <br>
    <br>
    <button @click="podejrzyjnapisym">Podejrzyj napisy</button>
    Fragment: <input style="width:30px" type="number" v-model.number="fragmentindex" :max="fragmenty.length - 1">

    <button @click="next('manual')">Next</button>



  </div>


  <script src="https://cdn.jsdelivr.net/npm/vue@2.6.12/dist/vue.js"></script>


  <script>

    let app = new Vue({
      el: '#app',
      data: {
        mytext: '',
        fragmenty: [
          {
            "tekst": "Why does it feel like night today? Something in the air's not right today",
            "index": 0,
            "start": 22,
            "duration": 4.7
          },
          {
            "tekst": "Why am I so uptight today? Paranoia's all I got left",
            "index": 1,
            "start": 26,
            "duration": 4
          },
          {
            "tekst": "I don't know what stressed me first Or how the pressure was fed",
            "index": 2,
            "start": 28.8,
            "duration": 4.5
          },
          {
            "tekst": "But I know just what it feels like To have a voice in the back of my head",
            "index": 3,
            "start": 31.5,
            "duration": 4.5
          },
          {
            "tekst": "Like a face that I hold inside A face that awakes when I close my eyes",
            "index": 4,
            "start": 34.8,
            "duration": 4.7
          },
          {
            "tekst": "A face watches every start I lie A face that laughs every start I fall (It watches everything)",
            "index": 5,
            "start": 38,
            "duration": 5
          },
          {
            "tekst": "So I know now when it's start to sink or swim",
            "index": 6,
            "start": 42,
            "duration": 3
          },
          {
            "tekst": "That the face inside is hearing me Right beneath my skin",
            "index": 7,
            "start": 45,
            "duration": 3.4
          },
          {
            "tekst": "It's like I'm paranoid lookin' over my back It's like a whirlwind inside of my head",
            "index": 8,
            "start": 48,
            "duration": 7
          },
          {
            "tekst": "It's like I can't stop what I'm hearing within",
            "index": 9,
            "start": 53.8,
            "duration": 4
          },
          {
            "tekst": "It's like the face inside is right beneath my skin",
            "index": 10,
            "start": 56.5,
            "duration": 6
          },
          {
            "tekst": "I know I've got a face in me Points out all my mistakes to me",
            "index": 11,
            "start": 61.5,
            "duration": 4
          },
          {
            "tekst": "You've got a face on the inside too Your paranoia's probably worse",
            "index": 12,
            "start": 64.5,
            "duration": 3.5
          },
          {
            "tekst": "I don't know what set me off first but I know what I can't stand",
            "index": 13,
            "start": 67.5,
            "duration": 3
          },
          {
            "tekst": "Everybody acts like the fact of the matter is I can't add up to what you can but",
            "index": 14,
            "start": 70.5,
            "duration": 4
          },
          {
            "tekst": "Everybody has a face that they hold inside A face that awakes when I close my eyes",
            "index": 15,
            "start": 73.5,
            "duration": 4.5
          },
          {
            "tekst": "A face that watches every start they lie A face that laughs every start they fall (It watches everything)",
            "index": 16,
            "start": 76.4,
            "duration": 5
          },
          {
            "tekst": "So you know that when it's start to sink or swim That the face inside is watching you too",
            "index": 17,
            "start": 81.4,
            "duration": 5
          },
          {
            "tekst": "The sun goes down",
            "index": 18,
            "start": 125,
            "duration": 5.5
          },
          {
            "tekst": "I feel the light betray me",
            "index": 19,
            "start": 133.8,
            "duration": 4
          },
        ],
        fragmentindex: 0,
        napisy: false,
        podejrzyjnapisy:false

      },
      methods: {
        next(mode) {
          this.podejrzyjnapisy = false;
          if (mode === 'manual') {
            this.fragmentindex = this.fragmentindex + 1;
            this.napisy = false;
          }

          let self = this;
          let audi = document.getElementById('auioelem');

          audi.currentTime = self.fragmenty[self.fragmentindex].start;
          audi.play();

          setTimeout(function () {
            audi.pause();
          }, self.fragmenty[self.fragmentindex].duration * 1000);



          if (self.napisy == false) {
            console.log(self.fragmentindex);

            document.getElementById('napisy').innerHTML = '';

          }

          if (self.napisy == true) {
            console.log(self.fragmentindex);
            document.getElementById('napisy').innerHTML = self.fragmenty[self.fragmentindex].tekst;
          }

          if (self.napisy) {
            self.fragmentindex = self.fragmentindex + 1;
          }

          self.napisy = !self.napisy;

          if (!napisy) {
            // this.mytext = '';
          }



        },

        podejrzyjnapisym(){
          document.getElementById('napisy').innerHTML = this.fragmenty[this.fragmentindex].tekst;
        }
      }

    })
  </script>


  <script>

    let fragmentindex = 1;

    let napisy = false;



    document.getElementById("ffbutton").addEventListener("click", function () {


      console.log(fragmentindex);










    })

  </script>
</body>

</html>